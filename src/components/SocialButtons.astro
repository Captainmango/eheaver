---
import { Icon } from "astro-icon/components";
---

<div>
    <ul class="wrapper">
        <li>
            <a id="theme-toggle" href="">
                <span class="sun-icon">
                    <Icon name="lucide:sun" size="28" />
                </span>
                <span class="moon-icon">
                    <Icon name="lucide:moon" size="28" />
                </span>
            </a>
        </li>
        <span class="socials-boarder"></span>
        <ul class="socials">
            <li>
                <a href="https://github.com/Captainmango">
                    <span>
                        <Icon name="fa6-brands:github" size="28" />
                    </span>
                </a>
            </li>
            <li>
                <a href="https://www.linkedin.com/in/edward-heaver-9ba556a0/">
                    <span>
                        <Icon name="fa6-brands:linkedin-in" size="28" />
                    </span>
                </a>
            </li>
            <li>
                <a href="https://x.com/EdwardHeaver6">
                    <span>
                        <Icon name="fa6-brands:x-twitter" size="28" />
                    </span>
                </a>
            </li>
        </ul>
    </ul>
</div>

<style lang="scss">
    .wrapper {
        position: relative;
        list-style: none;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        width: 22ch;

        & li {
            list-style: none;
            align-self: center;
        }
    }

    .socials {
        list-style: none;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;

        & li {
            list-style: none;
            align-self: center;
        }
    }

    .socials-boarder {
        z-index: 999;
        border-right: solid 2px var(--pico-color);
        margin-right: 0.75rem;
        opacity: 60%;
        height: 1.5rem;
        align-self: center;
    }
    .sun-icon,
    .moon-icon {
        display: none;
    }

    :global([data-theme='dark']) .sun-icon {
        display: inline;
    }

    :global([data-theme='light']) .moon-icon {
        display: inline;
    }
</style>

<script is:inline>
    function setInitialTheme() {
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = savedTheme || (prefersDark ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', theme);
    }

    function toggleTheme(event) {
        event.preventDefault()
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
    }

    setInitialTheme()
    document.getElementById('theme-toggle')?.addEventListener('click', toggleTheme);
</script>